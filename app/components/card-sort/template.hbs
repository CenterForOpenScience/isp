{{#if (eq page 'cardSort1')}}
    <p>{{t 'qsort.sections.1.instructions'}}</p>
{{else if (eq page 'cardSort2')}}
  <p>{{t 'qsort.sections.2.instructions'}}</p>
{{/if}}
<br>
<h4 class="text-center"><b>{{responses.q1}}</b></h4>
<h4 class="text-center"><b>{{responses.q2}}</b></h4>
<h4 class="text-center"><b>{{responses.q3}}</b></h4>
<br>
{{#if (eq page 'cardSort1')}}
  <div class="well card-container">
      {{#each cards as |card|}}
        {{#draggable-object content=card}}
          <div class="handle item alert alert-info" data-id={{card.id}}>{{t card.content}}</div>
        {{/draggable-object}}
      {{/each}}
  </div>
  <h4 class="center">{{t (concat 'number' cards.length)}} {{t 'qsort.sections.1.itemsLeft'}}</h4>
{{/if}}
<div class="row">
    {{#each-in buckets as |bucket array|}}
      <div class="col-sm-4">
          <h3 class="text-center">{{t (concat 'qsort.sections.1.categories.' bucket)}}</h3>
          {{#if (eq page 'cardSort1')}}
            {{#draggable-object-target bucket=array cards=cards buckets=buckets action='dragCard'}}
              <div class="well bucket">
                {{#each array as |card|}}
                  {{#draggable-object content=card}}
                    <div class="item alert alert-info" data-id={{card.id}}>{{t card.content}}</div>
                  {{/draggable-object}}
                {{/each}}
              </div>
            {{/draggable-object-target}}
          {{else if (eq page 'cardSort2')}}
              <div class="well bucket">
                {{#each array as |card|}}
                  {{#draggable-object content=card}}
                    <div class="item alert alert-info" data-id={{card.id}}>{{t card.content}}</div>
                  {{/draggable-object}}
                {{/each}}
              </div>
          {{/if}}
      </div>
    {{/each-in}}
</div>
{{#if (eq page 'cardSort2')}}
  <div class="row">
    {{#each-in buckets2 as |group categories|}}
      <div class="col-sm-4">
          <div class="row">
            {{#each-in categories as |category data|}}
              <div id="smallBucket" class="col-sm-4">
              <h5 class="text-center">{{t data.name}}</h5>
              <h5 class="text-center
                {{if (gte data.cards.length data.max) (if (eq data.cards.length data.max) 'text-success' 'text-danger') ''}}">
                {{data.cards.length}}/{{data.max}}
              </h5>
              {{#draggable-object-target bucket=data.cards buckets=buckets buckets2=buckets2 action="dragCard"}}
                <div class="well bucket">
                  {{#each data.cards as |card|}}
                    {{#draggable-object content=card}}
                      <div class="item alert alert-info small-card" style="font-size: 12px;" data-id={{card.id}}>{{t card.content}}</div>
                    {{/draggable-object}}
                  {{/each}}
                </div>
              {{/draggable-object-target}}
              </div>
            {{/each-in}}
        </div>
      </div>
    {{/each-in}}
  </div>
{{/if}}

{{#if (eq page 'cardSort1')}}
  <div class="btn btn-primary pull-right {{if (gt cards.length 0) 'disabled'}}" {{action "nextPage"}}>{{t 'global.continueLabel'}}</div>
  {{progress-bar pageNumber=3}}
{{else if (eq page 'cardSort2')}}
  <div class="btn btn-primary pull-right {{if isValid 'enabled' 'disabled'}}" {{action "nextSection"}}>{{t 'global.continueLabel'}}</div>
  {{progress-bar pageNumber=4}}
{{/if}}
